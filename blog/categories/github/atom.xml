<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Github | Almost Automatic]]></title>
  <link href="http://johker.github.io/blog/categories/github/atom.xml" rel="self"/>
  <link href="http://johker.github.io/"/>
  <updated>2015-01-04T10:52:40+00:00</updated>
  <id>http://johker.github.io/</id>
  <author>
    <name><![CDATA[Johannes Kern]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[A Very Basic Octopress Setup Using Vagrant]]></title>
    <link href="http://johker.github.io/blog/2015/01/03/a-very-basic-octopress-setup-using-vagrant/"/>
    <updated>2015-01-03T16:49:58+00:00</updated>
    <id>http://johker.github.io/blog/2015/01/03/a-very-basic-octopress-setup-using-vagrant</id>
    <content type="html"><![CDATA[<p>Setting up Octopress can be tricky, especially on Windows systems. Using a Vagrant powered virtual machine instead, we are only one command away from a blogging environment ready-to-go. Run from the directory of the Vagrantfile <code>vagrant up</code> will create a VirtualBox Image with Ubuntu 14.04 LTS.</p>

<pre><code class="ruby Vagrantfile for Octopress Setup https://github.com/johker/octopress_vagrant/blob/master/Vagrantfile github">VAGRANTFILE_API_VERSION = "2"
Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|
    config.vm.box = "octopress" 
    config.vm.box_url = "https://github.com/kraksoft/vagrant-box-ubuntu/releases/download/14.04/ubuntu-14.04-amd64.box"
    config.vm.network :private_network, ip: "192.168.34.10"     
    config.vm.provider "virtualbox" do |v|
        v.memory = 2048
    end  
    config.vm.provision :shell, :path =&gt; "scripts/octopress.sh"     
    config.vm.synced_folder "posts/", "/opt/octopress/source/_posts/"    
end
</code></pre>

<p>The setup is done by shell provisioning by including  <code>octopress.sh</code> the folder <code>/scripts</code> relative to the Vagrantfile. The folder <code>/posts</code> is used to access the <code>.markdown</code> files generated by <code>rake new post</code>. The files can be edited with an IDE on the host being automatically synced into the guest machine by <em>Vagrant</em>.</p>

<p>First, Ruby is installed using the Ruby Version Manager (RVM). It requires <code>curl</code> and <a href="https://www.digitalocean.com/community/questions/curl-l-get-rvm-io-bash-s-stable-fails-on-cent-os-on-hostgator">rvm public key signatures</a>. The <code>-y</code> flag automatically confirms any prompts for <code>apt-get</code>.</p>

<pre><code class="sh octopress.sh: Ruby Installation https://github.com/johker/octopress_vagrant/blob/master/scripts/octopress.sh github">
sudo apt-get -y update
sudo apt-get -y install curl
sudo apt-get -y install gnupg2
gpg2 --keyserver hkp://keys.gnupg.net --recv-keys D39DC0E3
\curl -L https://get.rvm.io | bash -s stable
source /etc/profile.d/rvm.sh
rvm requirements
rvm install ruby
rvm use ruby --default
</code></pre>

<p>Grant access to default user <code>vagrant</code> for <code>/opt</code> or the folder in which <em>Octopress</em> will be installed, respectively.</p>

<pre><code class="sh octopress.sh: Access grants https://github.com/johker/octopress_vagrant/blob/master/scripts/octopress.sh github">
sudo chown -R vagrant /opt
cd /opt 
</code></pre>

<p>Install Git to clone the <em>Octopress</em> repository. Nodejs is also [required]{<a href="http://sharadchhetri.com/2014/06/29/octopress-find-javascript-runtime/">http://sharadchhetri.com/2014/06/29/octopress-find-javascript-runtime/</a>}.</p>

<pre><code class="sh octopress.sh: Git and Nodejs https://github.com/johker/octopress_vagrant/blob/master/scripts/octopress.sh github">sudo apt-get -y install nodejs
sudo apt-get -y install -y git-core
</code></pre>

<p>The git repository cannot to be cloned into the folder <code>/opt/octopress</code> directly because <em>Vagrant</em> already synchronized the <code>posts</code> folder on machine startup. Thus, we clone to a temporary folder and move the repository afterwards.</p>

<pre><code class="sh octopress.sh: Clone Repository https://github.com/johker/octopress_vagrant/blob/master/scripts/octopress.sh github">
git clone git://github.com/imathis/octopress.git temp
mv temp/.git octopress/.git
rm -rf temp
cd /opt/octopress 
git fetch --all
git reset --hard origin/master
</code></pre>

<p>Finally, install <em>Octopress</em> and its requirements and grant access to user <code>vagrant</code>.</p>

<pre><code class="sh octopress.sh: Install Octopress https://github.com/johker/octopress_vagrant/blob/master/scripts/octopress.sh github">cd /opt/octopress 
gem install bundler
bundle install
rake install
sudo chown -R vagrant /opt/octopress
</code></pre>

<p>The complete project can be found <a href="https://github.com/johker/octopress_vagrant">here</a>.</p>
]]></content>
  </entry>
  
</feed>
